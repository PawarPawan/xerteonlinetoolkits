<script type="text/javascript">
	
	// pageChanged & sizeChanged functions are needed in every model file
	// other functions for model should also be in here to avoid conflicts
	var list = new function() {
		// function called every time the page is viewed after it has initially loaded
		this.pageChanged = function() {
			$("#infoHolder").hide();
			$(".listItem.highlight").removeClass("highlight");
		}
		
		// function called every time the size of the LO is changed
		this.sizeChanged = function() {
			if (x_browserInfo.mobile == false) {
				var $infoHolder = $("#infoHolder");
				$infoHolder.height($x_pageHolder.height() - $("#pageContents .splitScreen").position().top - parseInt($x_pageDiv.css("padding-top")) * 2 - parseInt($infoHolder.css("padding-top")) * 2);
			}
		}
	}
	
	var $listHolder = $("#listHolder");
	var $infoHolder = $("#infoHolder");
	$infoHolder.hide();
	
	$("#textHolder").html(x_addLineBreaks(x_currentPageXML.getAttribute("text")));
	
	var $listItem = $(".listItem:first");
	$(x_currentPageXML).children()
		.each(function(i) {
			var $thisItem;
			if (i != 0) {
				$thisItem = $listItem.clone().appendTo($listHolder);
			} else {
				$thisItem = $listItem;
			}
			
			$thisItem
				.attr("href", "#item" + i)
				.html(this.getAttribute("name"))
				.data({
					"name"	:this.getAttribute("name"),
					"text"	:this.getAttribute("text"),
					"url"	:eval(this.getAttribute("url")),
					"tip"	:this.getAttribute("tip")
					})
				.bind("click", function() {
					var $this = $(this);
					if ($this != $(".listItem.highlight")) {
						var infoString = "<h3>" + $this.data("name") + "</h3>" + "<p>" + x_addLineBreaks($this.data("text")) + "</p>";
						if ($this.data("url") != undefined && $this.data("url") != "") {
							infoString += '<div class="panelImg"><img src="' + $this.data("url") + '" ';
							if ($this.data("tip") != undefined && $this.data("tip") != "") {
								infoString += 'alt="' + $this.data("tip") + '" ';
							}
							infoString += ' /></div>';
						}
						$(".listItem.highlight").removeClass("highlight");
						$this.addClass("highlight");
						var $infoHolder = $("#infoHolder");
						$infoHolder.html(infoString);
						if ($("#infoHolder:hidden").length > 0) {
							$infoHolder.fadeIn();
							list.sizeChanged();
						}
					}
				});
		});
	
	x_pageLoaded();
	
</script>

<style type="text/css">
	
	#textHolder {
		padding-bottom:	20px;
	}
	
	.listItem {
		font-weight:	bold;
		display:		block;
		padding:		5px;
	}
	
	#infoHolder {
		overflow:	auto;
	}
	
	#infoHolder .panelImg {
		text-align:		center;
		padding-top:	10px;
	}
	
	#infoHolder .panelImg img {
		max-width:	100%;
		max-height:	100%;
	}
	
</style>

<div id="pageContents">
	
	<div id="textHolder">
	</div>
	
	<div class="splitScreen small">
		
		<div id="listHolder" class="left">
			<a class="listItem"></a>
		</div>
		
		<div class="right">
			<div id="infoHolder" class="panel">
			</div>
		</div>
		
	</div>
	
</div>