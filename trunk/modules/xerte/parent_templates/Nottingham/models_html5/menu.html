<script type="text/javascript">
	
	// pageChanged & sizeChanged functions are needed in every model file
	// other functions for model should also be in here to avoid conflicts
	var menu = new function() {
		// function called every time the page is viewed after it has initially loaded
		this.pageChanged = function() {
			if (x_params.menuImage != undefined && x_params.menuImage != "" && x_params.navigation != "Linear" && x_params.menuImageProperties == "Full Screen") {
				this.setUpBg();
			}
		}
		
		// function called every time the size of the LO is changed
		this.sizeChanged = function() {
			
		}
		
		// function sets up full screen bg image
		this.setUpBg = function(firstLoad) {
			var $pageBg = $('<img id="pageBg"/>');
			$pageBg
				.attr("src", eval(x_params.menuImage))
				.hide()
				.load(function() {
					$(this).fadeIn();
					if (firstLoad == true) {
						x_pageLoaded();
					}
				});
			$x_background.append($pageBg);
		}
		
		this.init = function() {
			var numOffset = 0;
			if (x_params.navigation != "Linear") {
				numOffset = 1;
			}
			
			var $menuItems = $("#menuItems");
			var $menuItem = $menuItems.find(".menuItem:first");
			for (var i=0; i<x_pages.length-numOffset; i++) {
				var $thisItem;
				if (i != 0) {
					$thisItem = $menuItem.clone().appendTo($menuItems);
				} else {
					$thisItem = $menuItem;
				}
				
				$thisItem.html(x_pages[i+numOffset].getAttribute("name"));
			}
			
			$(".menuItem")
				.button()
				.click(function() {
					$this = $(this);
					x_currentPage = $this.index() + numOffset;
					$this.removeClass("ui-state-focus");
					$this.removeClass("ui-state-hover");
					x_changePage();
				});
			
			if (x_params.menuImage != undefined && x_params.menuImage != "" && x_params.navigation != "Linear") {
				if (x_params.menuImageProperties != "Full Screen") { // use panel
					var imgMaxW;
					if (x_browserInfo.mobile == false) {
						imgMaxW = $(".right").width() - 80;
					} else {
						imgMaxW = $x_mobileScroll.width() - 40;
					}
					var imgMaxH = 450;
					$(".right").append('<img/>');
					$(".right img")
						.css("visibility", "hidden")
						.addClass("panel centre")
						.bind("load", function() {
							x_scaleImg(this, imgMaxW, imgMaxH)
							})
						.attr({
							"id":"pageImg",
							"src":eval(x_params.menuImage)
							})
						.load(function() {
							// call this function in every model once everything's loaded
							x_pageLoaded();
							});
				} else {
					menu.setUpBg(true);
				}
			} else {
				$("#menuHolder").removeClass("splitScreen");
				if (x_browserInfo.mobile == false && x_params.navigation != "Linear" && x_params.navigation != undefined) {
					$menuItems.width("70%");
				}
			}
			
			if (x_params.navigation != "Linear" && (x_params.menuImage == undefined || x_params.menuImage == "")) {
				x_pageLoaded();
			}
		}
	}
	
	menu.init();
	
</script>

<style type="text/css">
	
	#menuItems .menuItem {
		width:			100%;
		display:		block;
		margin-bottom:	5px;
		text-align:		left;
	}

	#menuItems {
		width:	100%;
	}
	
</style>

<div id="menuHolder" class="splitScreen">
	
	<div class="left">
		<div id="menuItems">
			<button class="menuItem"/>
		</div>
	</div>
	
	<div class="right">
	</div>
	
</div>